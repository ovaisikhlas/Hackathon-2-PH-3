# Data Model: Premium Frontend UI

## Task Entity

### Fields
- **id**: number (primary key, auto-increment)
  - Unique identifier for each task
  - Generated by the database
  - Required for all operations

- **user_id**: number (foreign key to User)
  - Links task to the user who created it
  - Used for data isolation and access control
  - Required for all operations

- **title**: string (1-200 characters)
  - Task title or subject
  - Required field for all tasks
  - Displayed prominently in task lists

- **description**: string (optional, max 1000 characters)
  - Detailed information about the task
  - Optional field for extended task information
  - May be truncated in list views

- **completed**: boolean
  - Indicates whether the task is completed
  - Default value: false
  - Toggled via completion API endpoint

- **created_at**: string (ISO 8601 date-time format)
  - Timestamp of when the task was created
  - Generated automatically by the database
  - Used for sorting and display purposes

- **updated_at**: string (ISO 8601 date-time format)
  - Timestamp of when the task was last updated
  - Updated automatically by the database
  - Used for tracking changes and sorting

### Validation Rules
- `title` must be 1-200 characters (inclusive)
- `description` must be 0-1000 characters (if provided)
- `completed` must be a boolean value
- `user_id` must correspond to an existing user
- `created_at` and `updated_at` are automatically managed

## User Entity

### Fields
- **id**: number (primary key, auto-increment)
  - Unique identifier for each user
  - Generated by the database
  - Used for data isolation

- **email**: string (unique)
  - User's email address for authentication
  - Required field for registration/login
  - Must be unique across all users

- **name**: string (optional)
  - User's display name
  - Optional field for personalization
  - May be used in UI for personalization

- **created_at**: string (ISO 8601 date-time format)
  - Timestamp of when the user account was created
  - Generated automatically by the database

- **updated_at**: string (ISO 8601 date-time format)
  - Timestamp of when the user account was last updated
  - Updated automatically by the database

### Validation Rules
- `email` must be a valid email format and unique
- `name` must be 0-255 characters (if provided)
- `id` is auto-generated and immutable

## State Transitions

### Task State Transitions
- **Incomplete → Complete**: When user marks task as complete
  - API: `PATCH /api/{user_id}/tasks/{task_id}/complete`
  - Changes `completed` from `false` to `true`

- **Complete → Incomplete**: When user unmarks completed task
  - API: `PATCH /api/{user_id}/tasks/{task_id}/complete`
  - Changes `completed` from `true` to `false`

### Task Lifecycle
1. **Created**: New task added via POST `/api/{user_id}/tasks`
2. **Updated**: Task modified via PUT `/api/{user_id}/tasks/{task_id}`
3. **Completed/Incomplete**: Status changed via PATCH `/api/{user_id}/tasks/{task_id}/complete`
4. **Deleted**: Task removed via DELETE `/api/{user_id}/tasks/{task_id}`

## API Response Formats

### Task Response Object
```typescript
{
  id: number,
  user_id: number,
  title: string,
  description?: string,
  completed: boolean,
  created_at: string, // ISO 8601 format
  updated_at: string  // ISO 8601 format
}
```

### Task Creation Request
```typescript
{
  title: string, // 1-200 chars
  description?: string // 0-1000 chars
}
```

### Task Update Request
```typescript
{
  title?: string, // 1-200 chars if provided
  description?: string // 0-1000 chars if provided
}
```

### Task Completion Toggle Response
```typescript
{
  completed: boolean
}
```

## Relationships

### Task → User (Many-to-One)
- Each task belongs to one user
- Each user can have many tasks
- Foreign key: `tasks.user_id` references `users.id`
- Cascade delete: When user is deleted, all their tasks are deleted